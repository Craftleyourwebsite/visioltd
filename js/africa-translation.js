(function () {
    const translations = {
        'EN': {
            // Hero Slider
            'slider_1_title': 'Mapping Opportunites',
            'slider_1_subtitle': 'Connecting Territories',
            'slider_1_desc': 'VISIO helps shape Africa’s growth through strategic planning and design—linking places, infrastructure, and communities with clear, buildable solutions that unlock long-term value.',
            'slider_btn_details': 'Details',

            'slider_2_title': 'From Vision to Reality',
            'slider_2_subtitle': 'End-to-End Execution',
            'slider_2_desc': 'From concept to completion, we deliver projects with disciplined coordination and design clarity—turning ambition into high-performing buildings and places across diverse African contexts.',

            'slider_3_title': 'Shaping Africa',
            'slider_3_subtitle': 'Resilient Places / Urban Transformation / Regional Impact',
            'slider_3_desc': 'We design for a continent in motion—creating resilient, climate-smart spaces and city strategies that strengthen communities, support investment, and elevate everyday life.',

            'slider_4_title': 'Designing for Resilience',
            'slider_4_subtitle': 'Performance & Craft',
            'slider_4_desc': 'Where creativity meets rigour: VISIO combines design excellence with technical precision to deliver architecture that performs, endures, and remains grounded in culture, climate, and place.',
            'slider_btn_read_more': 'Read More',

            // About Section
            'about_innovate': 'Innovate with Purpose',
            'about_africa_title': 'AFRICA',
            'about_desc': 'VISIO designs and delivers future-ready places across Africa—where excellence, resilience, and contextual intelligence come together to create lasting value.',
            'about_btn': 'Learn More',

            // Accordion Section
            'acc_partners_title': 'Your Key Partners',
            'acc_partners_content': '"VISIO is not only a design practice. We are a strategic partner for African development. We help public institutions, private developers, and investors translate ambition into deliverable projects—aligning vision, feasibility, governance, and execution.<br><br>Built on more than 40 years of legacy, first established through Gaetan SIEW’s leadership and accelerated over the last 15 years under Vinesh CHINTARAM’s regional drive, VISIO has grown into a multidisciplinary platform combining architecture, planning, development advisory, and project delivery support. Our strength lies in navigating complexity: multi-stakeholder environments, cross-border realities, constrained resources, and high expectations—while maintaining design quality and buildability.<br><br>From early strategy to concept definition, approvals, procurement support, and delivery coordination, we provide the clarity and momentum needed to move projects forward—creating environments that perform, inspire, and endure."',

            'acc_network_title': 'Our Network',
            'acc_network_content': '"Continental Reach. Local Relevance.<br>Active collaborations and engagements across 30+ African countries<br>A professional and institutional network spanning 40+ countries<br>Experience across complex assignments—from advisory mandates to full design and delivery support<br>A proven approach anchored in partnership with local architects and professionals, ensuring compliance, contextual fit, and knowledge transfer<br>Selected countries of experience: Madagascar, Seychelles, Réunion Island, Mayotte, Morocco, Algeria, Tunisia, Senegal, Côte d’Ivoire, Ghana, Nigeria, Cameroon, Ethiopia, Kenya, Rwanda, Tanzania, Uganda, Zambia, South Africa, Mozambique, Congo, DR Congo, and others."',

            'acc_gateway_title': 'Mauritius: Your Gateway to Africa',
            'acc_gateway_content': '"Mauritius is VISIO’s base—and a strategic platform for African engagement. Through the Mauritius IFC, partners benefit from a stable, transparent environment with:<br>Strong legal and contractual frameworks<br>Structured mechanisms for project financing and cross-border investment<br>Efficient vehicles for regional operations and partnerships<br>This allows VISIO to offer an end-to-end bridge—from feasibility and investment readiness to design delivery and implementation support—helping projects move from vision to impact across African cities and territories."',

            // Services Section
            'serv_structuring': 'Structuring the Path',
            'serv_designing': '"Designing the Future"',
            'serv_title': 'SERVICES',
            'serv_desc': 'Delivering architectural services with innovation, precision, and creativity to design spaces that inspire, function seamlessly, and stand the test of time.',
            'serv_btn': 'All Services',
            'serv_unique_title': 'VISIO’s Unique Services for Africa',

            'serv_1_title': '1) Strategic Development Advisory',
            'serv_1_desc': 'Turning land and ideas into investable, bankable projects—programme definition, phasing strategy, business logic, and development pathways aligned with local realities.',

            'serv_2_title': '2) Africa-Ready Masterplanning & Regeneration',
            'serv_2_desc': 'City extensions, post-mining regeneration, brownfield reuse, and urban intensification strategies—linking planning, mobility, public realm, and economic engines into one coherent vision.',

            'serv_3_title': '3) Institutional & Public-Sector Delivery Support',
            'serv_3_desc': 'End-to-end support for ministries, municipalities, and agencies—from briefing to approvals—built on institutional trust, governance awareness, and experience with complex stakeholder environments.',

            'serv_4_title': '4) Cross-Border Project Structuring & Partnerships',
            'serv_4_desc': 'Building the right consortium: identifying technical partners, local counterparts, financiers, and operators—mobilising VISIO’s network across Africa (and beyond) to accelerate delivery.',

            'serv_5_title': '5) Design Leadership for Complex, High-Visibility Projects',
            'serv_5_desc': 'Signature projects that demand precision and credibility—airports, high-rise, specialised facilities, large public buildings, and technically demanding programmes.',

            // Footer
            'footer_contact_us_title': 'CONTACT US',
            'footer_address_title': 'Address',
            'footer_address_content': '45, Saint Georges Street 11324 Port Louis, Mauritius',
            'footer_mail_title': 'Mail Us',
            'footer_call_title': 'Call Us',
            'footer_hours_title': 'Working Hours',
            'footer_hours_content': 'Monday - Friday : 8:00am - 5:00 pm',
            'footer_our_projects_title': 'OUR PROJECTS',
            'footer_all_projects': 'All Projects',
            'footer_architecture': 'Architecture',
            'footer_urban_planning': 'Urban Planning & Master Planning',
            'footer_infrastructure': 'Infrastructure & Mobility',
            'footer_industrial': 'Industrial & Logistics',
            'footer_heritage': 'Heritage & Adaptive Reuse',
            'footer_interior': 'Interior Architecture',
            'footer_landscape': 'Landscape & Public Realm',
            'footer_strategy': 'Strategy & Feasibility',
            'footer_links_title': 'LINKS',
            'footer_home': 'Home',
            'footer_about': 'About Us',
            'footer_services': 'Services',
            'footer_africa': 'Africa',
            'footer_rise': 'RISE',
            'footer_social': 'Social',
            'footer_projects': 'Projects',
            'footer_news': 'News',
            'footer_contact': 'Contact',
            'footer_mission_vision_title': 'MISSION & VISION',
            'footer_mission_desc': 'Our mission is to shape the future of African architecture by combining innovation, sustainability, and cultural identity. We strive to create spaces that inspire, connect, and endure, fostering growth and resilience across the continent.',
            'footer_vision_desc': 'Our vision is to be the leading architectural partner in Africa, driving transformative development through strategic design and execution. We aim to build a legacy of excellence, bridging global expertise with local relevance to unlock the potential of every project.'
        },
        'FR': {
            // Hero Slider
            'slider_1_title': 'Cartographier les Opportunités',
            'slider_1_subtitle': 'Connecter les Territoires',
            'slider_1_desc': 'VISIO contribue à façonner la croissance de l’Afrique grâce à une planification et une conception stratégiques, reliant les lieux, les infrastructures et les communautés avec des solutions claires et réalisables qui créent une valeur à long terme.',
            'slider_btn_details': 'Détails',

            'slider_2_title': 'De la Vision à la Réalité',
            'slider_2_subtitle': 'Exécution de Bout en Bout',
            'slider_2_desc': 'Du concept à la réalisation, nous livrons des projets avec une coordination rigoureuse et une clarté de conception, transformant l’ambition en bâtiments et espaces performants dans divers contextes africains.',

            'slider_3_title': 'Façonner l’Afrique',
            'slider_3_subtitle': 'Lieux Résilients / Transformation Urbaine / Impact Régional',
            'slider_3_desc': 'Nous concevons pour un continent en mouvement, créant des espaces résilients et climato-intelligents ainsi que des stratégies urbaines qui renforcent les communautés, soutiennent l’investissement et améliorent le quotidien.',

            'slider_4_title': 'Concevoir pour la Résilience',
            'slider_4_subtitle': 'Performance & Savoir-Faire',
            'slider_4_desc': 'Là où la créativité rencontre la rigueur : VISIO allie excellence du design et précision technique pour livrer une architecture performante, durable et ancrée dans la culture, le climat et le lieu.',
            'slider_btn_read_more': 'Lire Plus',

            // About Section
            'about_innovate': 'Innover avec Sens',
            'about_africa_title': 'AFRIQUE',
            'about_desc': 'VISIO conçoit et livre des lieux d’avenir à travers l’Afrique, où l’excellence, la résilience et l’intelligence contextuelle s’unissent pour créer une valeur durable.',
            'about_btn': 'En Savoir Plus',

            // Accordion Section
            'acc_partners_title': 'Vos Partenaires Clés',
            'acc_partners_content': '"VISIO n’est pas seulement un cabinet de design. Nous sommes un partenaire stratégique pour le développement africain. Nous aidons les institutions publiques, les promoteurs privés et les investisseurs à traduire leurs ambitions en projets réalisables, en alignant vision, faisabilité, gouvernance et exécution.<br><br>Fort de plus de 40 ans d’héritage, établi d’abord sous le leadership de Gaetan SIEW et accéléré au cours des 15 dernières années sous l’impulsion régionale de Vinesh CHINTARAM, VISIO est devenu une plateforme multidisciplinaire combinant architecture, urbanisme, conseil en développement et soutien à la livraison de projets. Notre force réside dans la gestion de la complexité : environnements multi-acteurs, réalités transfrontalières, ressources limitées et attentes élevées, tout en maintenant qualité de conception et constructibilité.<br><br>De la stratégie initiale à la définition du concept, en passant par les approbations, le soutien aux achats et la coordination de la livraison, nous apportons la clarté et l’élan nécessaires pour faire avancer les projets, créant des environnements qui performent, inspirent et durent."',

            'acc_network_title': 'Notre Réseau',
            'acc_network_content': '"Portée Continentale. Pertinence Locale.<br>Collaborations actives et engagements dans plus de 30 pays africains<br>Un réseau professionnel et institutionnel couvrant plus de 40 pays<br>Expérience sur des missions complexes, des mandats de conseil au soutien complet à la conception et à la livraison<br>Une approche éprouvée ancrée dans le partenariat avec des architectes et professionnels locaux, assurant conformité, adéquation contextuelle et transfert de connaissances<br>Pays d’expérience sélectionnés : Madagascar, Seychelles, La Réunion, Mayotte, Maroc, Algérie, Tunisie, Sénégal, Côte d’Ivoire, Ghana, Nigeria, Cameroun, Éthiopie, Kenya, Rwanda, Tanzanie, Ouganda, Zambie, Afrique du Sud, Mozambique, Congo, RDC, et autres."',

            'acc_gateway_title': 'Maurice : Votre Porte d’Entrée vers l’Afrique',
            'acc_gateway_content': '"Maurice est la base de VISIO et une plateforme stratégique pour l’engagement africain. À travers le Centre Financier International de Maurice, les partenaires bénéficient d’un environnement stable et transparent avec :<br>Des cadres juridiques et contractuels solides<br>Des mécanismes structurés pour le financement de projets et l’investissement transfrontalier<br>Des véhicules efficaces pour les opérations et partenariats régionaux<br>Cela permet à VISIO d’offrir une passerelle de bout en bout, de la faisabilité et la préparation à l’investissement jusqu’à la livraison de la conception et le soutien à la mise en œuvre, aidant les projets à passer de la vision à l’impact à travers les villes et territoires africains."',

            // Services Section
            'serv_structuring': 'Structurer le Chemin',
            'serv_designing': '"Concevoir le Futur"',
            'serv_title': 'SERVICES',
            'serv_desc': 'Fournir des services architecturaux avec innovation, précision et créativité pour concevoir des espaces qui inspirent, fonctionnent parfaitement et résistent à l’épreuve du temps.',
            'serv_btn': 'Tous les Services',
            'serv_unique_title': 'Les Services Uniques de VISIO pour l’Afrique',

            'serv_1_title': '1) Conseil en Développement Stratégique',
            'serv_1_desc': 'Transformer terrains et idées en projets investissables et bancables : définition de programme, stratégie de phasage, logique commerciale et parcours de développement alignés sur les réalités locales.',

            'serv_2_title': '2) Masterplanning & Régénération « Africa-Ready »',
            'serv_2_desc': 'Extensions urbaines, régénération post-minière, réutilisation de friches industrielles et stratégies d’intensification urbaine, reliant planification, mobilité, espace public et moteurs économiques en une vision cohérente.',

            'serv_3_title': '3) Soutien Institutionnel & Public à la Livraison',
            'serv_3_desc': 'Soutien de bout en bout pour les ministères, municipalités et agences, du briefing aux approbations, fondé sur la confiance institutionnelle, la conscience de la gouvernance et l’expérience des environnements complexes.',

            'serv_4_title': '4) Structuration de Projets Transfrontaliers & Partenariats',
            'serv_4_desc': 'Construire le bon consortium : identifier partenaires techniques, homologues locaux, financeurs et opérateurs, mobilisant le réseau de VISIO à travers l’Afrique (et au-delà) pour accélérer la livraison.',

            'serv_5_title': '5) Leadership en Design pour Projets Complexes',
            'serv_5_desc': 'Projets signatures exigeant précision et crédibilité : aéroports, tours, installations spécialisées, grands bâtiments publics et programmes techniquement exigeants.',

            // Footer
            'footer_contact_us_title': 'NOUS CONTACTER',
            'footer_address_title': 'Adresse',
            'footer_address_content': '45, Rue Saint Georges 11324 Port Louis, Maurice',
            'footer_mail_title': 'Email',
            'footer_call_title': 'Téléphone',
            'footer_hours_title': 'Heures d\'ouverture',
            'footer_hours_content': 'Lundi - Vendredi : 8h00 - 17h00',
            'footer_our_projects_title': 'NOS PROJETS',
            'footer_all_projects': 'Tous les Projets',
            'footer_architecture': 'Architecture',
            'footer_urban_planning': 'Urbanisme & Master Planning',
            'footer_infrastructure': 'Infrastructure & Mobilité',
            'footer_industrial': 'Industriel & Logistique',
            'footer_heritage': 'Patrimoine & Réutilisation Adaptative',
            'footer_interior': 'Architecture d\'Intérieur',
            'footer_landscape': 'Paysage & Espace Public',
            'footer_strategy': 'Stratégie & Faisabilité',
            'footer_links_title': 'LIENS',
            'footer_home': 'Accueil',
            'footer_about': 'À Propos',
            'footer_services': 'Services',
            'footer_africa': 'Afrique',
            'footer_rise': 'RISE',
            'footer_social': 'Social',
            'footer_projects': 'Projets',
            'footer_news': 'Actualités',
            'footer_contact': 'Contact',
            'footer_mission_vision_title': 'MISSION & VISION',
            'footer_mission_desc': 'Notre mission est de façonner l\'avenir de l\'architecture africaine en alliant innovation, durabilité et identité culturelle. Nous nous efforçons de créer des espaces qui inspirent, connectent et perdurent, favorisant la croissance et la résilience à travers le continent.',
            'footer_vision_desc': 'Notre vision est d\'être le partenaire architectural de référence en Afrique, favorisant un développement transformateur grâce à une conception et une exécution stratégiques. Nous visons à construire un héritage d\'excellence, en reliant l\'expertise mondiale à la pertinence locale pour libérer le potentiel de chaque projet.'
        }
    };

    function updatePageContent(lang) {
        const dictionary = translations[lang];
        if (!dictionary) return;

        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const translated = dictionary[key];
            if (translated) {
                // Robust check: if the element has a .link-text span (theme structure), update that instead
                const linkTextSpan = el.querySelector('.link-text');
                if (linkTextSpan) {
                    linkTextSpan.textContent = translated;
                } else {
                    el.innerHTML = translated;
                }
            }
        });

        // Robust handling for animated titles (data-i18n-group)
        document.querySelectorAll('[data-i18n-group]').forEach(el => {
            const groupName = el.getAttribute('data-i18n-group');
            const translatedText = dictionary[groupName]; // Some groups might use the key directly

            // Or look up based on mapping
            let groupText = '';
            if (groupName === 'about_africa_title') groupText = dictionary['about_africa_title'];
            else if (groupName === 'serv_title') groupText = dictionary['serv_title'];
            else if (groupName === 'footer_contact_us_title') groupText = dictionary['footer_contact_us_title'];
            else if (groupName === 'footer_our_projects_title') groupText = dictionary['footer_our_projects_title'];
            else if (groupName === 'footer_links_title') groupText = dictionary['footer_links_title'];
            else if (groupName === 'footer_mission_vision_title') groupText = dictionary['footer_mission_vision_title'];

            if (groupText) {
                const words = groupText.split(' ');
                const wordSpans = el.querySelectorAll('.qodef-e-word, .qodef-e-word-holder');

                if (wordSpans.length > 0) {
                    // Distribute words among spans
                    const wordsPerElement = Math.ceil(words.length / wordSpans.length);
                    wordSpans.forEach((span, index) => {
                        const start = index * wordsPerElement;
                        const end = start + wordsPerElement;
                        const segment = words.slice(start, end).join(' ');
                        span.textContent = segment;
                    });
                } else {
                    el.textContent = groupText;
                }
            }
        });

        // Update Language Button State
        const languageBtn = document.getElementById('language-btn');
        if (languageBtn) {
            languageBtn.classList.toggle('active', lang === 'FR');
        }

        // Force layout recalculation
        setTimeout(() => {
            window.dispatchEvent(new Event('resize'));
        }, 100);
    }

    // Listen to custom event from language.js
    window.addEventListener('languageChanged', function (e) {
        updatePageContent(e.detail.language);
    });

    // Initial load
    document.addEventListener('DOMContentLoaded', function () {
        const storedLang = localStorage.getItem('currentLanguage') || 'EN';
        updatePageContent(storedLang);

        // Ensure language.js UI is sync
        window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: storedLang } }));
    });

})();
